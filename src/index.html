<!doctype html>
<html>
  <head>
    <title><%= json.project.title %></title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="style.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <%= t.include("partials/_head.html") %>
    <%= t.include("partials/_analytics.html") %>
  </head>
  <script>  var HDN = HDN || {}  </script>

  <body>

    <responsive-child>

    <%= t.include("partials/_nav.html") %>

    <div class="outer">

      <!-- <img class="icon left" src="./assets/top_hat.jpg"></img> -->
      <!-- <img class="icon right" src="./assets/top_hat.jpg"></img> -->
      <div class="title-img"><img src="./assets/election2016banner.png"></div>

      <div id="stick-here"></div>
      <div id="stick-me">
        <div class="sub-title-links outer" style="margin: 0 auto;">
          <div class="long" id="long">ELECTION <span class="year">2016</span></div>
          <div class="sub-title"><a id="f" href="#federal">Federal</a></div>
          <div class="sub-title"><a id="s" href="#state">State</a></div>
          <div class="sub-title"><a id="l" href="#local">SF</a></div>
          <div class="sub-title"><a id="r" href="#regional">Regional</a></div>
        </div>
      </div>
      <div id="stick-ph"></div>

      <div class="outer">

        <h4 class="race president">President</h4>

        <div class="icon left">
          <img src="./assets/graphics/clinton.png">
        </div>
        <div class="icon right">
          <img src="./assets/graphics/trump.png">
        </div>

        <h3 class="president-name left">Hillary Clinton <span id="electoralhillaryclinton">(100)</span></h3>
        <h3 class="president-name right">Donald Trump <span id="electoraldonaldtrump">(10)</span></h3>
        <div class="president-bar">
          <div class="bar" id="hillaryclinton"></div>
          <div class="bar" id="uncounted"></div>
          <div class="bar" id="donaldtrump"></div>
          <div class="mark270"></div>
        </div>
        <div class="marker270"><i class="fa fa-angle-double-up" aria-hidden="true"></i></div>
        <div class="marker270label">270 electoral votes</div>

        <div class="button-container" id="pres-button-container">
          <div class="button race button-pres states-pres active" id="presidentbystate">Results by state</div>
          <div class="button race button-pres counties-pres" id="presidentbycounty">Results by county</div>
        </div>

        <div id="map-container-president"></div>

        <div class="legend-container">
          <div class="element"><div class="dem-swath"><div class="legend-text">Democratic winner</div></div></div>
          <div class="element"><div class="rep-swath"><div class="legend-text">Republican winner</div></div></div>
          <div class="element"><div class="other-swath"><div class="legend-text">Other winner</div></div></div>
        </div>

        <div class="divider"></div>
        <div class="inline-img ad">
          <img src="https://placeholdit.imgix.net/~text?txtsize=33&txt=AD%20SPACE&w=728&h=90"></img>
        </div>
        <div class="divider"></div>

      </div>

      <section id="federal">
      <h1>Federal</h1>
      <div class="br"></div>

        <div id="fsec">
          <h4 class="race senate" id="senate">U.S. Senate</h4>
          <h4 class="race congress" id="congress">U.S. House, District 17</h4>
        </div>


      <div class="outer">

        <div class="hed">Federal election results:</div>

        <div class="button-container">
          <div class="button race governor active" id="governormap">Governor</div>
          <div class="button race senate" id="senatemap">Senate</div>
          <div class="button race congress" id="congressmap">House</div>
        </div>

        <div id="map-container-federal"></div>

        <div class="legend-container">
          <div class="element"><div class="dem-swath"><div class="legend-text">Democratic winner</div></div></div>
          <div class="element"><div class="rep-swath"><div class="legend-text">Republican winner</div></div></div>
          <div class="element"><div class="other-swath"><div class="legend-text">Other winner</div></div></div>
        </div>

      </div>

    </section>
    <section id="state">
      <h1>State</h1>

      <h2 class="races" id="racectrl"><i class="fa fa-caret-right" id="rcaret" aria-hidden="true"></i>  Races:</h2>

      <div id="racesec">
        <h4 class="race statesenate" id="statesenate">State Senate</h4>
        <h4 class="race statedistrict9" id="statedistrict9">State District 9</h4>
        <h4 class="race stateassembly" id="stateassembly">State Assembly</h4>
      </div>

      <h2 class="propositions" id="propctrl"><i class="fa fa-caret-right" id="caret" aria-hidden="true"></i>  Propositions:</h2>
      <div id="propsec">
        <input type="text" placeholder="&#xf002;  Search by proposition number or title" id="propositions-search" style="font-family:AntennaExtraLight, FontAwesome">

        <div class="propositions-list">
          <% csv.StatePropositionsData.forEach(function(prop,idx){ %>

            <div class='prop-group active <%=prop.number%> <%=prop.title%>'>
              <div class='prop-icon'>
                <img src='./assets/graphics/stateprops/prop<%=prop.number%>.png'></img>
                <div class='prop-name'>Prop. <%=prop.number%></div>
              </div>
              <div class='prop-name'><%=prop.title%></div>
              <div class='result'><div id="prop<%=prop.number%>"></div></div>
              <div class='prop-desc'><%=prop.description%></div>

              <% if (prop.link){ %>
                <div class='prop-link'><a target='_blank' href='<%=prop.link%>'><i class='fa fa-external-link' aria-hidden='true'></i>  Read more</a></div>
              <% } %>
            </div>

          <% }); %>
        </div>
      </div>

      <div class="br"></div>
      <div class="hed">California results by county:</div>
      <div class="chatter">Hover over or click on the counties to see how Californians voted in each precinct for representatives and propositions.</div>

      <div class="legend-container">
        <div class="element"><div class="dem-swath"><div class="legend-text">Democratic winner</div></div></div>
        <div class="element"><div class="yes-swath"><div class="legend-text">Yes vote</div></div></div>
        <div class="element"><div class="rep-swath"><div class="legend-text">Republican winner</div></div></div>
        <div class="element"><div class="no-swath right"><div class="legend-text">No vote</div></div></div>
        <div class="element"><div class="dem2-swath"><div class="legend-text">Democratic winner (2)</div></div></div>
      </div>

      <div class="flex-container" style="min-width: 315px;">
        <div class="button-container vertical" id="ca-map-buttons">
          <div class="button camap race caassembly active">State Assembly</div>
          <div class="button camap race casenate">State Senate</div>
          <div class="button camap race cadistrict">State Districts</div>
          <div class="button camap race cafeddistrict">Senate (federal) by district</div>
          <% csv.StatePropositionsData.forEach(function(prop,idx){ %>
            <div class="button camap prop camapprop prop<%=prop.number%>" id="button<%=prop.number%>"><%=prop.title%> (Prop. <%=prop.number%>)</div>
          <% }); %>
        </div>

        <div id="map-container-state"></div>
      </div>

    </section>
    <section id="local">

      <h1>San Francisco</h1>

      <h2 class="races" id="sctrl"><i class="fa fa-caret-right" id="scaret" aria-hidden="true"></i>  Supervisors:</h2>
      <div id="ssec">
        <div id="sf-section"></div>
      </div>

      <h2 class="sf-propositions" id="sfpropctrl"><i class="fa fa-caret-right" id="sfcaret" aria-hidden="true"></i>  Propositions:</h2>
      <div id="sfpropsec">
        <input type="text" placeholder="&#xf002;  Search by SF proposition letter or name" id="sf-propositions-search" style="font-family:AntennaExtraLight, FontAwesome">

        <div class="sf-propositions-list">
          <% csv.SFPropositionsData.forEach(function(prop,idx){ %>

            <div class='sf-prop-group active <%=prop.letter%> <%=prop.title%>'>
              <div class='sf-prop-icon'>
                <img src='./assets/graphics/sfprops/prop<%=prop.letter%>.png'></img>
              </div>
              <div class='prop-name'><%=prop.title%></div>
              <div class='result'><div id="sfprop<%=idx%>"></div></div>
              <div class='sf-prop-desc'><%=prop.description%></div>

              <% if (prop.link){ %>
                <div class='sf-prop-link'><a target='_blank' href='<%=prop.link%>'><i class='fa fa-external-link' aria-hidden='true'></i>  Read more</a></div>
              <% } %>
            </div>

          <% }); %>
        </div>
      </div>

    </section>
    <section id="regional">

      <h1>Regional</h1>
      <div class="br"></div>

      <div class="button-container section-container">
        <% csv.sections.forEach(function(section,idx){ %>
          <% if (idx == 0) { %>
            <div class="button sectionbutton <%=section.shortname %> active"><%=section.name%></div>
          <% } else { %>
            <div class="button sectionbutton <%=section.shortname %>"><%=section.name%></div>
          <% } %>
        <% }); %>
      </div>

      <div id="regional-results"></div>

    </section>

    <div class="divider"></div>

    <div class="inline-img" style="text-align: center">
      <img src="https://placeholdit.imgix.net/~text?txtsize=33&txt=AD%20SPACE&w=300&h=250"></img>
    </div>

    </div>

    </responsive-child>

    <%= t.include("partials/_footer.html") %>

    <script>

      // new presidential data
      // var presidentialData = <%= JSON.stringify(json.president_by_state) %>;
      // var presidentialCountyData = <%= JSON.stringify(json.president_by_county) %>;
      var presidentialData = <%= JSON.stringify(json.emma_pres_state_us) %>;
      var presidentialCountyData = <%= JSON.stringify(json.emma_pres_county_us) %>;

      // var electoralVotes = <%= JSON.stringify(csv.electoralVotes) %>;
      var electoralVotes = <%= JSON.stringify(json.electoralcount) %>;

      //country data
      var governorRaces = <%= JSON.stringify(json.emma_governor_state_us) %>;
      var senateRaces = <%= JSON.stringify(json.emma_senate_state_us) %>;
      var congressRaces = <%= JSON.stringify(json.emma_house_district_us) %>;

      // state data
      var stateRaces = <%= JSON.stringify(csv.stateRaces) %>;
      var propList = <%= JSON.stringify(csv.StatePropositionsData) %>;

      // state map
      var houseCA = <%= JSON.stringify(json.emma_house_district_ca) %>;
      var senateCA = <%= JSON.stringify(json.emma_statesenate_district_ca) %>;
      var federalsenateCA = <%= JSON.stringify(json.emma_senate_county_ca) %>;
      var assemblyCA = <%= JSON.stringify(json.emma_assembly_district_id) %>;
      var propsCA = <%= JSON.stringify(json.props_county_ca) %>;

      // SF data
      var SFpropList = <%= JSON.stringify(csv.SFPropositionsData) %>;
      var SFsupesList = <%= JSON.stringify(csv.SFSupesData) %>;

      // map look-up tables
      var stateCodes = <%= JSON.stringify(csv.stateCodes) %>;
      var countyCodes = <%= JSON.stringify(json.countyCodesLookup) %>;

      // local data
      var localData = <%= JSON.stringify(json.emma_localresults) %>;
      var sectionList = <%= JSON.stringify(csv.sections) %>;

    </script>

    <script src="app.js" async></script>
    <%= t.include("partials/_helloSFC.html") %>

  </body>
</html>
